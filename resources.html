<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resources - Earnio</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="luxury-theme.css">
    <link rel="stylesheet" href="responsive.css">
    <style>
        .resources-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 24px;
        }

        .resource-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-card);
            padding: 32px;
            display: flex;
            flex-direction: column;
            gap: 16px;
            transition: all 0.3s var(--ease-squish);
            position: relative;
            overflow: hidden;
        }

        .resource-card:hover {
            transform: translateY(-4px);
            border-color: var(--neon);
            box-shadow: var(--shadow-card);
        }

        .resource-icon {
            width: 56px;
            height: 56px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: var(--neon);
            margin-bottom: 8px;
        }

        .resource-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: white;
        }

        .resource-desc {
            color: var(--text-secondary);
            font-size: 0.9rem;
            line-height: 1.5;
            flex: 1;
        }

        .resource-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: var(--neon);
            font-weight: 600;
            font-size: 0.9rem;
            margin-top: auto;
            text-decoration: none;
            transition: gap 0.2s;
        }

        .resource-link:hover {
            gap: 12px;
        }

        .category-tag {
            position: absolute;
            top: 24px;
            right: 24px;
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-muted);
            font-weight: 600;
            border: 1px solid var(--border-subtle);
            padding: 4px 10px;
            border-radius: 50px;
        }
    </style>
</head>

<body>

    <!-- MOBILE TOP BAR -->
    <div class="mobile-top-bar">
        <a href="dashboard.html" class="floating-back-btn" style="position: static; box-shadow: none;">
            <i class="fas fa-arrow-left"></i>
        </a>
        <a href="profile.html" class="mobile-profile-btn" id="mobileProfileBtn">
            <i class="fas fa-user-circle"></i>
        </a>
    </div>

    <!-- SIDEBAR -->
    <div class="sidebar" id="sidebar">
        <div class="brand">
            <div class="brand-icon">
                <i class="fas fa-coins"></i>
            </div>
            <span class="brand-text">Earnio</span>
        </div>

        <ul class="nav-links">
            <li class="nav-item">
                <a href="dashboard.html">
                    <i class="fas fa-th-large"></i> Dashboard
                </a>
            </li>
            <li class="nav-item">
                <a href="team.html">
                    <i class="fas fa-users"></i> Referrals
                </a>
            </li>
            <li class="nav-item">
                <a href="tasks.html">
                    <i class="fas fa-bolt"></i> Tasks
                </a>
            </li>
            <li class="nav-item">
                <a href="courses.html">
                    <i class="fas fa-graduation-cap"></i> Courses
                </a>
            </li>
            <li class="nav-item">
                <a href="resources.html" class="active">
                    <i class="fas fa-box-open"></i> Resources
                </a>
            </li>
            <li class="nav-item">
                <a href="profile.html">
                    <i class="fas fa-user"></i> Profile
                </a>
            </li>

            <li class="nav-item admin-nav" id="adminNavItem" style="display: none;">
                <a href="admin.html">
                    <i class="fas fa-shield-alt"></i> Admin Panel
                </a>
            </li>
        </ul>

        <div class="user-section">
            <div class="user-avatar" id="userAvatar">E</div>
            <div class="user-info">
                <div class="user-name" id="sidebarEmail">Loading...</div>
                <div class="user-status" id="sidebarStatus">Checking...</div>
            </div>
            <div class="logout-btn" onclick="logout()" title="Logout">
                <i class="fas fa-sign-out-alt"></i>
            </div>
        </div>
    </div>

    <!-- MAIN CONTENT -->
    <div class="main-content">
        <div class="header">
            <div class="greeting">Tools for Success üõ†Ô∏è</div>
            <div class="page-title">Resources</div>
        </div>

        <div class="resources-grid">
            <!-- Resource Item -->
            <div class="resource-card">
                <div class="category-tag">Design</div>
                <div class="resource-icon"><i class="fas fa-palette"></i></div>
                <h3 class="resource-title">Canva Pro</h3>
                <p class="resource-desc">Create stunning graphics for your marketing campaigns with our shared team
                    access.</p>
                <a href="#" class="resource-link">Access Tool <i class="fas fa-arrow-right"></i></a>
            </div>

            <div class="resource-card">
                <div class="category-tag">Marketing</div>
                <div class="resource-icon"><i class="fas fa-bullhorn"></i></div>
                <h3 class="resource-title">Ad Copy Generator</h3>
                <p class="resource-desc">Generate high-converting ad copy for Facebook and Instagram ads instantly.</p>
                <a href="#" class="resource-link">Open Generator <i class="fas fa-arrow-right"></i></a>
            </div>

            <div class="resource-card">
                <div class="category-tag">Finance</div>
                <div class="resource-icon"><i class="fas fa-calculator"></i></div>
                <h3 class="resource-title">Profit Calculator</h3>
                <p class="resource-desc">Calculate your margins and potential earnings from your courses and referrals.
                </p>
                <a href="#" class="resource-link">Use Calculator <i class="fas fa-arrow-right"></i></a>
            </div>

            <div class="resource-card">
                <div class="category-tag">Learning</div>
                <div class="resource-icon"><i class="fas fa-book"></i></div>
                <h3 class="resource-title">E-Book Library</h3>
                <p class="resource-desc">Download exclusive PDF guides on digital marketing and sales strategies.</p>
                <a href="#" class="resource-link">Browse Library <i class="fas fa-arrow-right"></i></a>
            </div>
        </div>

    </div>

    <script>
        const token = localStorage.getItem('token');
        if (!token) window.location.href = 'login.html';

        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('open');
            if (sidebar.classList.contains('open')) {
                document.addEventListener('click', closeSidebarOutside);
            }
        }

        function closeSidebarOutside(e) {
            const sidebar = document.getElementById('sidebar');
            const toggle = document.querySelector('.mobile-toggle');
            if (!sidebar.contains(e.target) && !toggle.contains(e.target)) {
                sidebar.classList.remove('open');
                document.removeEventListener('click', closeSidebarOutside);
            }
        }

        function logout() {
            localStorage.removeItem('token');
            window.location.href = 'login.html';
        }

        async function loadUserData() {
            try {
                const res = await fetch('/dashboard/data', {
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                const data = await res.json();

                document.getElementById('sidebarEmail').textContent = data.user.email.split('@')[0];
                document.getElementById('sidebarStatus').textContent = data.user.isPaid ? 'Premium' : 'Active';
                // Avatar Logic
                const sidebarAv = document.getElementById('userAvatar');
                const mobileBtn = document.getElementById('mobileProfileBtn');

                if (data.user.avatar_url) {
                    const imgTag = `<img src="assets/avatars/${data.user.avatar_url}.png" style="width:100%; height:100%; border-radius:inherit; object-fit:cover;">`;

                    if (sidebarAv) {
                        sidebarAv.innerHTML = imgTag;
                        sidebarAv.style.background = 'transparent';
                    }
                    if (mobileBtn) {
                        mobileBtn.innerHTML = imgTag;
                        mobileBtn.style.padding = '0';
                        mobileBtn.style.width = '36px';
                        mobileBtn.style.height = '36px';
                        mobileBtn.style.borderRadius = '50%';
                        mobileBtn.style.overflow = 'hidden';
                        mobileBtn.style.border = '2px solid var(--neon)';
                        mobileBtn.style.display = 'flex';
                        mobileBtn.style.alignItems = 'center';
                        mobileBtn.style.justifyContent = 'center';
                    }
                } else if (sidebarAv) {
                    sidebarAv.textContent = data.user.email.charAt(0).toUpperCase();
                }

                if (data.user.isAdmin) {
                    document.getElementById('adminNavItem').style.display = 'block';
                }
            } catch (err) { console.error(err); }
        }

        loadUserData();
    </script>

    <!-- MOBILE BOTTOM NAVIGATION -->
    <nav class="mobile-bottom-nav">
        <a href="dashboard.html" class="nav-tab">
            <i class="fas fa-th-large"></i>
            <span>Home</span>
        </a>
        <a href="tasks.html" class="nav-tab">
            <i class="fas fa-bolt"></i>
            <span>Tasks</span>
        </a>
        <a href="courses.html" class="nav-tab">
            <i class="fas fa-graduation-cap"></i>
            <span>Learn</span>
        </a>
        <a href="team.html" class="nav-tab">
            <i class="fas fa-users"></i>
            <span>Team</span>
        </a>
        <a href="profile.html" class="nav-tab">
            <i class="fas fa-user"></i>
            <span>Profile</span>
        </a>
    </nav>
</body>

</html>